#!/bin/bash

# Create Encrypted Containers Without TrueCrypt

 # install LUKS

  p cryptsetup


 # Creating the File

  dd if=/dev/zero of=/root/test.bin bs=1M count=100

 
 # Create the container (loop0 can be loop1 if that doesn't work)
  sudo losetup /dev/loop0 /root/test.bin

 
 # Partition It
 
  sudo cfdisk /dev/loop0

 
 # Setting Up dm-crypt and LUKS
  
  sudo cryptsetup --verbose --verify-passphrase luksFormat /dev/loop0


  sudo cryptsetup luksOpen /dev/loop0 sometest

 
 # Formatting Our Container

  sudo mkfs.ext4 /dev/mapper/sometest

 
 # Mounting the Container

  sudo mkdir /mnt/encrypted

  sudo mount /dev/mapper/sometest /mnt/encrypted


 # When Finished:
 
	# Unmount the container
	sudo umount /mnt/encrypted
   
	# Detach the container
	sudo losetup -d /dev/loop0
