#!/bin/bash
# My Personal Hacks and nifty plugins for Media handling



# To Create Hardlinks for the Clean Shows folder (no .nfo, .tbn ) etc...
sudo rsync -iavuhHP --min-size=25M --link-dest=/media/C1/Shows \
/media/C1/Shows/ /media/C1/Other/Shows-clean/



########################################################################



# Getting movies that don't have any subtitles (.srt  or .sub)

# Drop = you can drop a bunch of commands at once #

######## Start of Drop #########
DIR="/home/abz/Movies"
sudo rm /tmp/a{1,2,3,4} 2>/dev/null
find-missing-dir srt "$DIR" > /tmp/a1
find-missing-dir sub "$DIR" >> /tmp/a1
cat  /tmp/a1|sort| uniq -d > /tmp/a2
cd "$DIR"
while read dir ;do find "$dir" -size +30M ;done < /tmp/a2 >| /tmp/a3
cat  /tmp/a3 | cut -d/ -f6 >| /tmp/a4
TMP="$(mktemp -d /tmp/Movies.XXXXXX)"
while read dir ;do touch "$TMP"/"$dir";done < /tmp/a4
export Path="$TMP" && parent
ls "$TMP"
echo "Files are in $TMP"
dolphin "$TMP" 2>/dev/null &

######### End of Drop #########









########################################################################



# Getting files that don't have any subtitles (.srt  or .sub)

# Drop = you can drop a bunch of commands at once #

######## Start of Drop 1 #########
DIR="/home/abz/TV/Shows/xxx"
find-missing-file srt "$DIR" > /tmp/b1
find-missing-file sub "$DIR" >> /tmp/b1
cat  /tmp/b1|sort| uniq -d > /tmp/b2
g /tmp/b2

#  delete any wrong lines in a2 (first & last line usually)

######### End of Drop 1 #########


######### Start of Drop 2 #########

cd "$DIR"
while read dir ;do find "$dir" -size +30M ;done < /tmp/b2 >| /tmp/b3
cat  /tmp/b3 | cut -d/ -f6 >| /tmp/b4
mk /tmp/bsss
while read dir ;do touch /tmp/bsss/"$dir";done < /tmp/b4
ls /tmp/bsss/
export Path=/tmp/bsss && parent


######### End of Drop 2 #########
