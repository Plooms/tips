
<p>
#!/bin/bash
# Installing Drupal and LAMP
</p>

<p>
#######################################################################
</p>

<p>
# Install packages
</p>

<p>
 p apache php-apache php-gd php-pear php-intl php-xcache mariadb \
 mariadb-clients libmariadbclient drupal
</p>

<p>
#######################################################################
</p>

<p>
# Configuring MariaDB for Drupal
{
</p>
<pre class="code">sudo systemctl restart mysqld

sudo systemctl enable mysqld</pre>
<pre class="code">mysql_secure_installation	# Choose Y for default options

mysql -u root -p</pre>
<pre class="code"># In MySQL console ,   MariaDB [(none)]&gt;

CREATE DATABASE drupal;</pre>
<pre class="code"># NOTE: change &#039;password&#039; to the mysql root user password

GRANT ALL ON drupal.* TO &#039;root&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;password&#039;;
	
exit</pre>

<p>
}
</p>

<p>
#######################################################################
</p>

<p>
# Configuring php for Drupal
{
</p>
<pre class="code">n /etc/php/php.ini

# Find the line open_basedir &amp; Add the Drupal install directories

#ABZ
open_basedir = xxx:/usr/share/webapps/drupal:/var/lib/drupal:

#SAL
#open_basedir = xxx:/usr/share/webapps/drupal:/var/lib/drupal:/home/sal/TV:/media:</pre>
<pre class="code"># Make sure these are uncommented ; and add them if they dont exist
extension=curl.so
extension=gd.so
extension=gettext.so
extension=iconv.so
extension=intl.so
extension=mysqli.so
extension=mysql.so
extension=openssl.so
extension=pdo_mysql.so
extension=xmlrpc.so
extension=zip.so
extension=ixed.5.3
extension=uploadprogress.so
extension=xcache.so</pre>
<pre class="code"># configure the following options for upload cap size (all same same)
post_max_size = 1000M
upload_max_filesize = 1000M</pre>
<pre class="code"># Execute
sudo pecl install uploadprogress</pre>

<p>
}	
</p>

<p>
#######################################################################
</p>

<p>
# Configuring Apache for Drupal
{
</p>
<pre class="code">n /etc/httpd/conf/httpd.conf


# If your webserver is dedicated to Drupal , then Change

DocumentRoot &quot;/srv/http&quot; &gt;&gt; DocumentRoot &quot;/usr/share/webapps/drupal&quot;</pre>
<pre class="code">Directory &quot;/srv/http&quot;  &gt;&gt;  Directory &quot;/usr/share/webapps/drupal&quot;</pre>
<pre class="code"># Add to the end of  /httpd.conf to run php

LoadModule php5_module modules/libphp5.so
Include conf/extra/php5_module.conf</pre>

<p>
############### Change this module #######################
##########################################################
LoadModule mpm_event_module modules/mod_mpm_event.so
############### With this one ############################
LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
##########################################################
</p>

<p>
}
</p>

<p>
#######################################################################
</p>

<p>
# Starting Services
</p>

<p>
 sudo systemctl enable mysqld
 sudo systemctl enable httpd
 sudo systemctl restart mysqld
 sudo systemctl restart httpd
</p>

<p>
#######################################################################
</p>

<p>
# Configuring Drupal Options
</p>
<pre class="code">Database name = &quot;drupal&quot;

Database user = &quot;root&quot;

Database password = &quot;the root user mysql password&quot;

Site name = &quot;whatever&quot;

Email = &quot;whatever&quot;</pre>

<p>
#######################################################################
</p>

<p>
# Resetting the Drupal admin password
</p>
<pre class="code">mysql -u root -p drupal</pre>
<pre class="code"># DO NOT CHANGE PARAMETERS , except &#039;name&#039;
#This will reset the password to &quot;drupal&quot;</pre>

<p>
UPDATE users SET name=&#039;abz&#039;, pass=&#039;$S$Drl0vgZ9yuU9uc4JyaTMHxMPriC7q/PsOUOx52fCrVQSTpI/Tu4x&#039; WHERE uid = 1;
</p>

<p>
#######################################################################
</p>

<p>
# Resources
</p>

<p>
<a href="https://wiki.archlinux.org/index.php/drupal" class="urlextern" title="https://wiki.archlinux.org/index.php/drupal"  rel="nofollow">https://wiki.archlinux.org/index.php/drupal</a>
<a href="https://wiki.archlinux.org/index.php/Apache" class="urlextern" title="https://wiki.archlinux.org/index.php/Apache"  rel="nofollow">https://wiki.archlinux.org/index.php/Apache</a>
<a href="https://wiki.archlinux.org/index.php/MySQL" class="urlextern" title="https://wiki.archlinux.org/index.php/MySQL"  rel="nofollow">https://wiki.archlinux.org/index.php/MySQL</a>
<a href="https://wiki.archlinux.org/index.php/PHP" class="urlextern" title="https://wiki.archlinux.org/index.php/PHP"  rel="nofollow">https://wiki.archlinux.org/index.php/PHP</a>
</p>
